<!DOCTYPE html>
<html lang=en>
<head>
    <meta charset="utf-8">
    
    <title>Rebuild Personal Website and Blog |é‡æ–°æ­å»ºç«™ç‚¹å’Œåšå®¢ | Yingchi&#39;s blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="æµæ°´è´¦æ—¥å¿—">
<meta property="og:type" content="article">
<meta property="og:title" content="Rebuild Personal Website and Blog |é‡æ–°æ­å»ºç«™ç‚¹å’Œåšå®¢">
<meta property="og:url" content="http://blog.peiyingchi.com/2017/03/11/rebuild-personal-website-and-blog/index.html">
<meta property="og:site_name" content="Yingchi's blog">
<meta property="og:description" content="æµæ°´è´¦æ—¥å¿—">
<meta property="og:image" content="http://blog.peiyingchi.com/14889387685017.jpg">
<meta property="og:image" content="http://blog.peiyingchi.com/14890468705671.jpg">
<meta property="og:updated_time" content="2017-03-19T03:31:02.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Rebuild Personal Website and Blog |é‡æ–°æ­å»ºç«™ç‚¹å’Œåšå®¢">
<meta name="twitter:description" content="æµæ°´è´¦æ—¥å¿—">
<meta name="twitter:image" content="http://blog.peiyingchi.com/14889387685017.jpg">
    

    

    
        <link rel="icon" href="/css/images/whale.png" />
    

    <link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/libs/open-sans/styles.css">
    <link rel="stylesheet" href="/libs/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/libs/jquery/2.1.3/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">
    
    
        <link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">
    
    
    
    


</head>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<body>
    <div id="container">
        <header id="header">
    <div id="header-main" class="header-inner">
        <div class="outer">
            <a href="/" id="logo">
                <i class="logo"></i>
                <span class="site-title">Yingchi&#39;s blog</span>
            </a>
            <nav id="main-nav">
                
                    <a class="main-nav-link" href="/.">Home</a>
                
                    <a class="main-nav-link" href="/archives">Archives</a>
                
                    <a class="main-nav-link" href="/categories">Categories</a>
                
                    <a class="main-nav-link" href="/tags">Tags</a>
                
                    <a class="main-nav-link" href="/about">About</a>
                
            </nav>
            
                
                <nav id="sub-nav">
                    <div class="profile" id="profile-nav">
                        <a id="profile-anchor" href="javascript:;">
                            <img class="avatar" src="/css/images/profile_pic.png" />
                            <i class="fa fa-caret-down"></i>
                        </a>
                    </div>
                </nav>
            
            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
        </div>
    </div>
    <div id="main-nav-mobile" class="header-sub header-inner">
        <table class="menu outer">
            <tr>
                
                    <td><a class="main-nav-link" href="/.">Home</a></td>
                
                    <td><a class="main-nav-link" href="/archives">Archives</a></td>
                
                    <td><a class="main-nav-link" href="/categories">Categories</a></td>
                
                    <td><a class="main-nav-link" href="/tags">Tags</a></td>
                
                    <td><a class="main-nav-link" href="/about">About</a></td>
                
                <td>
                    
    <div class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
    </div>

                </td>
            </tr>
        </table>
    </div>
</header>

        <div class="outer">
            
            
                <script type='text/javascript'>
                $('body').append("<style type='text/css'>@media screen and (min-width: 1200px) { #main {margin: auto; width: 70%; display: block; float:none;}}</style>");
                </script>
                <script type='text/javascript'>
                document.querySelector('style').textContent += "@media screen and (max-width: 1199px) and (min-width: 800px) { #main {margin: auto; width: 70%; display: block; float:none;}}"
                </script>
            
            <section id="main"><article id="post-rebuild-personal-website-and-blog" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
            Rebuild Personal Website and Blog |é‡æ–°æ­å»ºç«™ç‚¹å’Œåšå®¢
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2017/03/11/rebuild-personal-website-and-blog/">
            <time datetime="2017-03-11T10:03:02.000Z" itemprop="datePublished">2017-03-11</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/Website-Dev/">Website Dev</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/website-dev/">website dev</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
                <div id="toc" class="toc-article">
                <strong class="toc-title">Catalogue</strong>
                    <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#å¿ƒè·¯å†ç¨‹"><span class="toc-number">1.</span> <span class="toc-text">å¿ƒè·¯å†ç¨‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#åŸºäºç°å®çš„è®¡åˆ’"><span class="toc-number">2.</span> <span class="toc-text">åŸºäºç°å®çš„è®¡åˆ’</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#åœ¨DOå®ç°ä¸ªäººä¸»é¡µå’Œåšå®¢çš„æ­å»º"><span class="toc-number">3.</span> <span class="toc-text">åœ¨DOå®ç°ä¸ªäººä¸»é¡µå’Œåšå®¢çš„æ­å»º</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å¿ƒè·¯å†ç¨‹3-çš„å…·ä½“è¿‡ç¨‹"><span class="toc-number">4.</span> <span class="toc-text">å¿ƒè·¯å†ç¨‹3.çš„å…·ä½“è¿‡ç¨‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å¿ƒè·¯å†ç¨‹4-çš„å…·ä½“è¿‡ç¨‹"><span class="toc-number">5.</span> <span class="toc-text">å¿ƒè·¯å†ç¨‹4.çš„å…·ä½“è¿‡ç¨‹</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Install-LEMP-stack"><span class="toc-number">5.1.</span> <span class="toc-text">Install LEMP stack</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Set-Up-Nginx-Server-Blocks-Virtual-Hosts-on-Ubuntu-16-04"><span class="toc-number">5.2.</span> <span class="toc-text">Set Up Nginx Server Blocks (Virtual Hosts) on Ubuntu 16.04</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#What-is-symbolic-link"><span class="toc-number">6.</span> <span class="toc-text">What is symbolic link?</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Transfer-files-Local-lt-gt-Remote-Server-using-SFTP"><span class="toc-number">6.1.</span> <span class="toc-text">Transfer files Local <==> Remote Server using SFTP</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Nginx-server-blocks-è®¾ç½®"><span class="toc-number">6.2.</span> <span class="toc-text">Nginx server blocks è®¾ç½®</span></a></li></ol></li></ol>
                </div>
            
            <p>æµæ°´è´¦æ—¥å¿—<br><a id="more"></a></p>
<h3 id="å¿ƒè·¯å†ç¨‹"><a href="#å¿ƒè·¯å†ç¨‹" class="headerlink" title="å¿ƒè·¯å†ç¨‹"></a>å¿ƒè·¯å†ç¨‹</h3><ol>
<li>ä¹‹å‰åœ¨Bluehostä¸Šä¹°äº†ä¸ªåŸŸå<code>yingchi.com</code>ï¼Œå°±ç›´æ¥åœ¨å®ƒé‚£é‡Œä¹°äº†æœ€åŸºæœ¬çš„Web hostingæœåŠ¡ï¼Œç”¨çš„æ˜¯LAPM stack(Linux, Apache, MySQL, and PHP)ï¼ŒèŠ±äº†åŠå¤©æ‰¾äº†ä¸ªå¥½çœ‹çš„ä¸ªäººä¸»é¡µæ¨¡æ¿ï¼Œä¿®ä¿®æ”¹æ”¹ï¼Œå¡«ä¸Šç»å†æŠ€èƒ½å°±æ”¾é‚£é‡Œæ²¡ç®¡äº†ã€‚</li>
<li>ç°åœ¨æƒ³æ·»ä¸ªåšå®¢ä¸Šå»ï¼Œä¹Ÿç£ä¿ƒè‡ªå·±æŠŠå¹³æ—¶çš„ç¬”è®°å®šæ—¶æ•´ç†ä¸€ä¸‹ã€‚</li>
<li>éšä¾¿ä¸€æŸ¥ï¼Œå‘ç°æˆ‘å»ï¼ŒBluehostçš„åŸŸåè´¹ä¸ä¾¿å®œå•Šã€‚é©¬ä¸Šè¦ç»­è´¹äº†ï¼Œå¤§æ¦‚ $15 USDä¸€å¹´ï¼Œç„¶ånamecheapä¸Šæ˜¯ $10ä¸€å¹´ã€‚ç”¨GitHubçš„Student Packè¿˜èƒ½ç™½æ‹¿ä¸€å¹´çš„<code>yingchi.me</code>åŸŸåç©ã€‚æ‰€ä»¥å°±æŠŠåŸŸåè¿ç§»åˆ°äº†namecheapã€‚</li>
<li>ç„¶ååˆæŸ¥åˆ°Digital Oceançš„Web hostingä¹Ÿæ›´ä¾¿å®œï¼Œè¿˜å¯ä»¥éšä¾¿å®‰è£…ç³»ç»Ÿï¼Œç”¨VPSã€‚è€ŒBluehostä¸Šç»™çš„æœåŠ¡æ˜¯Shared hostingã€‚å°±ä¹°äº†DOçš„æœåŠ¡ï¼Œå…ˆæŠŠ<code>yingchi.me</code>æè¿‡å»ç©ä¸€ç©ã€‚</li>
<li>æƒ³åšåˆ°ï¼š<ul>
<li>åœ¨namecheapç®¡ç†åŸŸå</li>
<li>åœ¨DO host <code>yingchi.com</code> å¹¶æŠŠä¸ªäººèµ„æ–™é¡µé¢æ”¾åœ¨è¿™é‡Œ</li>
<li>åœ¨<code>blog.yingchi.com</code>æ”¾åŸºäºHexoå¹³å°çš„ä¸ªäººåšå®¢</li>
</ul>
</li>
</ol>
<h3 id="åŸºäºç°å®çš„è®¡åˆ’"><a href="#åŸºäºç°å®çš„è®¡åˆ’" class="headerlink" title="åŸºäºç°å®çš„è®¡åˆ’"></a>åŸºäºç°å®çš„è®¡åˆ’</h3><ol>
<li>å› ä¸ºåœ¨Bluehostçš„Web hostingæœåŠ¡è¿˜æœ‰ä¸€å¹´(ä¸ºä»€ä¹ˆè¦ä¹°è¿™ä¹ˆä¹…ã€‚ã€‚ã€‚), æ‰€ä»¥<code>yingchi.com</code>çš„hostingå…ˆä¸åŠ¨</li>
<li>ç”¨<code>yingchi.me</code>è¿™ä¸ªåŸŸåï¼Œ<strong>åœ¨DOå®ç°ä¸ªäººä¸»é¡µå’Œåšå®¢çš„æ­å»º</strong> ï¼ˆè¿™æ˜¯ä¸ªå·¥ç¨‹æ¯”è¾ƒå¤§çš„ä¸€æ­¥ï¼‰</li>
<li>æŠŠ<code>yingchi.com</code>åŸŸåhoståˆ°DOï¼Œå¹¶ç¬¬äºŒæ­¥è¿ç§»åˆ°<code>yingchi.com</code></li>
</ol>
<h3 id="åœ¨DOå®ç°ä¸ªäººä¸»é¡µå’Œåšå®¢çš„æ­å»º"><a href="#åœ¨DOå®ç°ä¸ªäººä¸»é¡µå’Œåšå®¢çš„æ­å»º" class="headerlink" title="åœ¨DOå®ç°ä¸ªäººä¸»é¡µå’Œåšå®¢çš„æ­å»º"></a>åœ¨DOå®ç°ä¸ªäººä¸»é¡µå’Œåšå®¢çš„æ­å»º</h3><ol>
<li>ä¸ªäººä¸»é¡µè®¡åˆ’æ”¾åœ¨ <code>yingchi.me</code> ç”¨æ™®é€šHTMLé¡µé¢å®ç°ã€‚åšå®¢æ”¾åœ¨<code>blog.yingchi.me</code>, ç”¨Hexoå®ç°</li>
<li>åœ¨æœ¬åœ°æ­å»ºå®Œæˆä¸ªäººä¸»é¡µï¼ˆå…ˆç”¨åŸæ¥çš„ï¼‰å’Œä¸ªäººåšå®¢ã€‚Complete the development for the personal homepage and also the blog locallyã€‚æµæ°´è´¦å’Œè¸©å‘è¿‡ç¨‹è®°å½•åœ¨ï¼š</li>
<li>æŠŠè¿™ä¸¤å¥—ç«™ç‚¹çš„æ–‡ä»¶éƒ¨ç½²åˆ°DOä¸Šã€‚æµæ°´è´¦å’Œè¸©å‘è¿‡ç¨‹è®°å½•åœ¨ï¼š</li>
</ol>
<h3 id="å¿ƒè·¯å†ç¨‹3-çš„å…·ä½“è¿‡ç¨‹"><a href="#å¿ƒè·¯å†ç¨‹3-çš„å…·ä½“è¿‡ç¨‹" class="headerlink" title="å¿ƒè·¯å†ç¨‹3.çš„å…·ä½“è¿‡ç¨‹"></a>å¿ƒè·¯å†ç¨‹3.çš„å…·ä½“è¿‡ç¨‹</h3><p>When I log in to my cPanel, under â€˜performanceâ€™ tab, there is no â€˜manage accessâ€™ option.<br><img src="14889387685017.jpg" alt=""></p>
<p>It seems that I do not have a dedicated IP address.<br>However, after looking up the charges for VPS or dedicated IP, it was around $20 per month. I donâ€™t want to invest so much for now. So letâ€™s try some other approachs:</p>
<ul>
<li>host my blog subdomain <code>blog.peiyingchi.com</code> on GitHub Pages. This option is free</li>
<li>move my hosting service from bluehost to another server provider completely. E.g. Digital Ocean, where they provides VPS server at $4 per month.</li>
</ul>
<p>å¦‚æœä¸æƒ³éº»çƒ¦å­¦ä¹ VPSè¿˜æœ‰èŠ±é’±å»ä¹°è¿™äº›æœåŠ¡ï¼Œè€Œä¸”åªæ˜¯æƒ³ç®€å•çš„æ­å»ºä¸€ä¸ªBlogçš„è¯å¯ä»¥ç”¨ç¬¬ä¸€ç§æ¸ é“ã€‚<br>è¿™ä¸ªæ¸ é“æ­å»ºHexo blogå·²ç»æœ‰å¾ˆå¤šç½‘ä¸Šæ•™ç¨‹å¯ä»¥è·Ÿç€å­¦ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªæ¯”è¾ƒå…¨é¢çš„ï¼š<br><a href="http://blog.fens.me/hexo-blog-github/" target="_blank" rel="external">http://blog.fens.me/hexo-blog-github/</a></p>
<p>ç»è¿‡çº ç»“ğŸ˜–ï¼Œæˆ‘æ²¡æœ‰ç”¨githubä½œä¸ºæœåŠ¡å™¨ï¼Œæœ€ç»ˆé€‰äº†ç¬¬äºŒç§æ–¹ï¼Œå»ä¹°äº†DOçš„åŸºæœ¬ç‰ˆçš„ubuntu serverã€‚</p>
<h3 id="å¿ƒè·¯å†ç¨‹4-çš„å…·ä½“è¿‡ç¨‹"><a href="#å¿ƒè·¯å†ç¨‹4-çš„å…·ä½“è¿‡ç¨‹" class="headerlink" title="å¿ƒè·¯å†ç¨‹4.çš„å…·ä½“è¿‡ç¨‹"></a>å¿ƒè·¯å†ç¨‹4.çš„å…·ä½“è¿‡ç¨‹</h3><p>è¿™é‡Œæˆ‘é€‰äº†Digital Ocean, ä»GitHubçš„Student packé‡Œé¢å¯ä»¥æ‹¿åˆ°$50çš„promotion. </p>
<p>Create a new DigitalOcean Droplets with Ubentu 16.04.2 x64.<br>Select the $5/mo package.<br>Add SSH keys.</p>
<blockquote>
<p>On what is SSH keys and how to add one, refer to this <a href="https://www.digitalocean.com/community/tutorials/how-to-use-ssh-keys-with-digitalocean-droplets" target="_blank" rel="external">How To Use SSH Keys with DigitalOcean Droplets</a></p>
</blockquote>
<p>ä¸æƒ³åœ¨è¿™é‡Œadd shh keysç›´æ¥ç‚¹createã€‚ ä¼šæœ‰é‚®ä»¶ç»™ä½ rootçš„åœ°å€å’Œå¯†ç ï¼Œæœ‰å¦ä¸€å°é‚®ä»¶å‘Šè¯‰ä½ æ€ä¹ˆåšä¸€äº›ç®€å•çš„server setupã€‚ä¸€æ­¥æ­¥è·Ÿç€æ¥å°±å¥½ã€‚</p>
<p><strong>Step 1: The Must-Haves</strong></p>
<ul>
<li>Review the Ubuntu 14.04 server checklist which covers:<ul>
<li><a href="http://pages.news.digitalocean.com/z0VX3V6001eIXHQ0EYC0D00" target="_blank" rel="external">Initial Ubuntu server setup</a> tutorial with step-by-step configuration instructions, and<br><a href="http://pages.news.digitalocean.com/z0VX3V6001eIXIQ0EYD0D00" target="_blank" rel="external">Connecting to your Droplet with SSH.</a></li>
<li>Use DigitalOceanâ€™s DNS to <a href="http://pages.news.digitalocean.com/f00QV060XJ010I3VEXDEY0e" target="_blank" rel="external">set up your hostname</a> from the Control Panel.</li>
</ul>
</li>
</ul>
<p><strong>Step 2: Web Servers</strong></p>
<ul>
<li>Install the powerful <a href="http://pages.news.digitalocean.com/XV60YHI1X000DQeXV030EM0" target="_blank" rel="external">Nginx web server</a> on Ubuntu.</li>
<li>Use <a href="http://pages.news.digitalocean.com/I001NEX06eYIXV3V0Q0ID00" target="_blank" rel="external">Nginx virtual hosts</a> to serve multiple sites on one server. </li>
</ul>
<p>åœ¨è®¾ç½®Domainçš„è¿‡ç¨‹ä¸­å¯èƒ½ä¼šç¢°åˆ°ä¸‹é¢è¿™äº›åè¯ï¼š</p>
<blockquote>
<p>Aè®°å½•<br>Aè®°å½•æ˜¯ç”¨æ¥æŒ‡å®šä¸»æœºåï¼ˆæˆ–åŸŸåï¼‰å¯¹åº”çš„IPåœ°å€è®°å½•ã€‚ç”¨æˆ·å¯ä»¥å°†è¯¥åŸŸåä¸‹çš„ç½‘ç«™æœåŠ¡å™¨æŒ‡å‘åˆ°è‡ªå·±çš„web serverä¸Šã€‚åŒæ—¶ä¹Ÿå¯ä»¥è®¾ç½®æ‚¨åŸŸåçš„äºŒçº§åŸŸåã€‚<br>CNAMEè®°å½•<br>CNAMEè®°å½•ï¼Œå³ï¼šåˆ«åè®°å½•ã€‚è¿™ç§è®°å½•å…è®¸æ‚¨å°†å¤šä¸ªåå­—æ˜ å°„åˆ°åŒä¸€å°è®¡ç®—æœºã€‚ é€šå¸¸ç”¨äºåŒæ—¶æä¾›WWWå’ŒMAILæœåŠ¡çš„è®¡ç®—æœºã€‚ä¾‹å¦‚ï¼Œæœ‰ä¸€å°è®¡ç®—æœºåä¸ºâ€œhost.mydomain.comâ€ï¼ˆAè®°å½•ï¼‰ã€‚ å®ƒåŒæ—¶æä¾›WWWå’ŒMAILæœåŠ¡ï¼Œä¸ºäº†ä¾¿äºç”¨æˆ·è®¿é—®æœåŠ¡ã€‚å¯ä»¥ä¸ºè¯¥è®¡ç®—æœºè®¾ç½®ä¸¤ä¸ªåˆ«åï¼ˆCNAMEï¼‰ï¼šWWWå’ŒMAILã€‚</p>
</blockquote>
<h4 id="Install-LEMP-stack"><a href="#Install-LEMP-stack" class="headerlink" title="Install LEMP stack"></a>Install LEMP stack</h4><p>Follow this tutorial:<br><a href="https://www.digitalocean.com/community/tutorials/how-to-install-linux-nginx-mysql-php-lemp-stack-in-ubuntu-16-04" target="_blank" rel="external">How To Install Linux, Nginx, MySQL, PHP (LEMP stack) in Ubuntu 16.04</a></p>
<p>Error installing mysql?ï¼ˆå®‰è£…Mysqlå‡ºç°é”™è¯¯?)<br>Uninstall mysql completely (æŒ‰ç…§ä»¥ä¸‹çš„æ•™ç¨‹å®Œå…¨å¸è½½Mysqlå†é‡æ–°å®‰è£…):<br><a href="http://askubuntu.com/questions/776845/uninstall-mysql-from-ubuntu-16-04" target="_blank" rel="external">Uninstall MySQL from Ubuntu 16.04</a><br><a href="http://askubuntu.com/questions/640899/uninstall-mysql-completely" target="_blank" rel="external">Uninstall MySQL completely</a></p>
<h4 id="Set-Up-Nginx-Server-Blocks-Virtual-Hosts-on-Ubuntu-16-04"><a href="#Set-Up-Nginx-Server-Blocks-Virtual-Hosts-on-Ubuntu-16-04" class="headerlink" title="Set Up Nginx Server Blocks (Virtual Hosts) on Ubuntu 16.04"></a>Set Up Nginx Server Blocks (Virtual Hosts) on Ubuntu 16.04</h4><p>Follow this tutorial:<br><a href="https://www.digitalocean.com/community/tutorials/how-to-set-up-nginx-server-blocks-virtual-hosts-on-ubuntu-16-04" target="_blank" rel="external">How To Set Up Nginx Server Blocks (Virtual Hosts) on Ubuntu 16.04</a></p>
<p><strong>Step One: Set Up New Document Root Directories</strong><br>By default, Nginx on Ubuntu 16.04 has one server block enabled by default. It is configured to serve documents out of a directory at <code>/var/www/html</code></p>
<p>We will create a directory structure within <code>/var/www</code> for each of our sites. The actual web content will be placed in an <code>html</code> directory within these site-specific directories. This gives us some additional flexibility to create other directories associated with our sites as siblings to the html directory if necessary.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sudo mkdir -p /var/www/yingchi.me/html</div><div class="line">sudo mkdir -p /var/www/blog.yingchi.me/html</div></pre></td></tr></table></figure>
<p>We can use the <code>$USER</code> environmental variable to assign ownership to the account that we are currently signed in on (make sure youâ€™re not logged in as root). This will allow us to easily create or edit the content in this directory:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sudo chown -R $USER:$USER /var/www/yingchi.me/html</div><div class="line">sudo chown -R $USER:$USER /var/www/blog.yingchi.me/html</div></pre></td></tr></table></figure>
<p><strong>Step 2: upload your website files to your domains</strong><br>You can simple create a dummy <code>index.html</code> page if you just want to test.<br>Otherwise, you can upload your files using SFTP or other file transfer methods.</p>
<p><strong>Step 3: Create server block files for each domain</strong><br>we will create our first server block config file by copying over the default file:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sudo cp /etc/nginx/sites-available/default /etc/nginx/sites-available/yingchi.me</div><div class="line">sudo nano /etc/nginx/sites-available/yingchi.me</div></pre></td></tr></table></figure>
<p>Edit the file, and make it looks like the following:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">server &#123;</div><div class="line">    listen <span class="number">80</span>;</div><div class="line">    listen [::]:<span class="number">80</span>;</div><div class="line"></div><div class="line">    root /<span class="keyword">var</span>/www/yingchi.me/html;</div><div class="line">    index index.html index.htm index.nginx-debian.html;</div><div class="line"></div><div class="line">    server_name yingchi.me www.yingchi.me;</div><div class="line"></div><div class="line">    location / &#123;</div><div class="line">        try_files $uri $uri/ =<span class="number">404</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Do the same for the 2nd domain.</p>
<p><strong>Step 4: Enable your Server Blocks and Restart Nginx</strong><br>Now that we have our server block files, we need to enable them. We can do this by creating symbolic links from these files to the sites-enabled directory, which Nginx reads from during startup.</p>
<p>We can create these links by typing:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sudo ln -s /etc/nginx/sites-available/yingchi.me /etc/nginx/sites-enabled/</div><div class="line">sudo ln -s /etc/nginx/sites-available/blog.yingchi.me /etc/nginx/sites-enabled/</div></pre></td></tr></table></figure>
<blockquote>
<h3 id="What-is-symbolic-link"><a href="#What-is-symbolic-link" class="headerlink" title="What is symbolic link?"></a>What is symbolic link?</h3><p>A symbolic link, also termed a soft link, is a special kind of file that points to another file, much ==like a shortcut in Windows or a Macintosh alias==. Unlike a hard link, a symbolic link does not contain the data in the target file. It simply points to another entry somewhere in the file system. This difference gives symbolic links certain qualities that hard links do not have, such as the ability to link to directories, or to files on remote computers networked through NFS. Also, when you delete a target file, symbolic links to that file become unusable, whereas hard links preserve the contents of the file.<br>To create a symbolic link in Unix/Linux, at the Unix prompt, enter:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ln -s source_file myfile</div></pre></td></tr></table></figure>
<p>Replace <code>source_file</code> with the name of the existing file for which you want to create the symbolic link (this file can be any existing file or directory across the file systems). Replace <code>myfile</code> with the name of the symbolic link. The <code>ln</code> command then creates the symbolic link. After youâ€™ve made the symbolic link, you can perform an operation on or execute <code>myfile</code>, just as you could with the <code>source_file</code>. You can use normal file management commands (e.g., <code>cp</code>, <code>rm</code>) on the symbolic link.</p>
</blockquote>
<h4 id="Transfer-files-Local-lt-gt-Remote-Server-using-SFTP"><a href="#Transfer-files-Local-lt-gt-Remote-Server-using-SFTP" class="headerlink" title="Transfer files Local &lt;==&gt; Remote Server using SFTP"></a>Transfer files Local &lt;==&gt; Remote Server using SFTP</h4><p>Follow this tutorial if itâ€™s your first time using SFTP:<br><a href="https://www.digitalocean.com/community/tutorials/how-to-use-sftp-to-securely-transfer-files-with-a-remote-server" target="_blank" rel="external">How To Use SFTP to Securely Transfer Files with a Remote Server</a><br>You can also set up SFTP on Cyberduck by providing your server IP, username and password. Put port number as 22.</p>
<p>I encountered the following error when trying to upload files through SFTP.<br><img src="14890468705671.jpg" alt=""></p>
<p>I then tried to upload files from terminal (log in by <code>sftp yingchi@xx.xx.xx.xx</code>) and I got</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">remote open(<span class="string">"/var/www/yingchi.me/html/index.html"</span>): Permission denied</div></pre></td></tr></table></figure>
<p>So it seems that I did not set the permission for the folder correctly.</p>
<p>After some search, here is the solution:</p>
<p><strong>1. add user â€œyingchiâ€ to group â€œwww-dataâ€ (below replace yingchi with your username):</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo usermod -a -G www-data yingchi</div></pre></td></tr></table></figure>
<p><strong>2. set permissions for user group www-data</strong><br>Here, because I want to upload my files to <code>/var/www/yingchi.me/...</code><br>and also <code>/var/www/blog.yingchi.me/...</code>, so I opened the permission for <code>/var/www</code>. If you just have one domain, and the files are under <code>/var/www/html</code>, you can modify the path and only open permission for that folder.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sudo chown -R www-data:www-data /var/www</div><div class="line">sudo chmod -R g+w /var/www</div></pre></td></tr></table></figure>
<h4 id="Nginx-server-blocks-è®¾ç½®"><a href="#Nginx-server-blocks-è®¾ç½®" class="headerlink" title="Nginx server blocks è®¾ç½®"></a>Nginx server blocks è®¾ç½®</h4><p><a href="https://fraserxu.me/2013/06/22/Nginx-for-developers/" target="_blank" rel="external">https://fraserxu.me/2013/06/22/Nginx-for-developers/</a></p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://blog.peiyingchi.com/2017/03/11/rebuild-personal-website-and-blog/" data-id="cj0g5333v000kvrkd1i536q12" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    
        <a href="http://blog.peiyingchi.com/2017/03/11/rebuild-personal-website-and-blog/#comments" class="article-comment-link disqus-comment-count" data-disqus-url="http://blog.peiyingchi.com/2017/03/11/rebuild-personal-website-and-blog/">Comments</a>
    

        </footer>
    </div>
    
        
<nav id="article-nav">
    
        <a href="/2017/03/17/HTTPS-with-Letsencrypt/" id="article-nav-newer" class="article-nav-link-wrap">
            <strong class="article-nav-caption">Newer</strong>
            <div class="article-nav-title">
                
                    Setup HTTPS Using Letsencrypt |ç”¨Let&#39;s Encryptå®ç°HTTPS
                
            </div>
        </a>
    
    
        <a href="/2017/03/11/hexo-user-notes/" id="article-nav-older" class="article-nav-link-wrap">
            <strong class="article-nav-caption">Older</strong>
            <div class="article-nav-title">Hexo User Notes |Hexoçš„åŸºæœ¬ä½¿ç”¨</div>
        </a>
    
</nav>


    
</article>


    
    <section id="comments">
    
        
    <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>

    
    </section>

</section>
            
            
        </div>
        <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            &copy; 2017 
            <span class="with-love">
            	<i class="fa fa-heart"></i>
            </span>
            Yingchi<br>
            <!-- 
            Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. Theme by <a href="http://github.com/ppoffice">PPOffice</a>
            -->
            Last modified: Mar. 12th, 2017
        </div>
    </div>
</footer>
        
    
    <script>
    var disqus_config = function () {
        
            this.page.url = 'http://blog.peiyingchi.com/2017/03/11/rebuild-personal-website-and-blog/';
        
        this.page.identifier = 'rebuild-personal-website-and-blog';
    };
    (function() { 
        var d = document, s = d.createElement('script');  
        s.src = '//' + 'yingchi' + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>




    
        <script src="/libs/lightgallery/js/lightgallery.min.js"></script>
        <script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/libs/lightgallery/js/lg-pager.min.js"></script>
        <script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/libs/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/libs/lightgallery/js/lg-hash.min.js"></script>
        <script src="/libs/lightgallery/js/lg-share.min.js"></script>
        <script src="/libs/lightgallery/js/lg-video.min.js"></script>
    
    
        <script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>
    



<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>
</body>
</html>